<div class="container" id="widget-container">
    <style>
        .classes__lists-content-class > div > div > div > h4 {
            margin-right: 15px;
        }    
        .hidden {
            display: none;
        }
    </style>

    <!-- Placeholder for MyClassesWidget -->
    <div id="MyClassesWidget" 
        data-component="CustomWidget" 
        data-sp="api_Custom_LCOH_MyClasses" 
        data-template="https://hopeautomation.blob.core.windows.net/downloads/myClassTemplate.html" 
        data-requireUser="true" 
        data-cache="true" 
        data-host="hope" 
        data-debug="true">
        <!-- Placeholder content -->
        <p>Loading your classes...</p>
    </div>

    <script type="text/javascript" src="https://hopeautomation.blob.core.windows.net/downloads/customWidget.js"></script>
    <script id="MPWidgets" src="https://mpi.ministryplatform.com/widgets/dist/MPWidgets.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            function loadMyClassesWidget() {
                // Initialize the widget
                MPWidgets.init({
                    component: document.getElementById('MyClassesWidget')
                });
            }

            // Create an Intersection Observer to lazy load the widget
            let observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        loadMyClassesWidget();
                        observer.disconnect(); // Stop observing after the widget is loaded
                    }
                });
            }, { rootMargin: "0px 0px -50px 0px" });

            // Observe the MyClassesWidget
            let widget = document.getElementById('MyClassesWidget');
            if (widget) {
                observer.observe(widget);
            }
        });
    </script>
</div>
